\chapter{Detalles de ImplementaciÃ³n y Experimentos}\label{chapter:implementation}
El objetivo de esta tesis es comparar dos de las heuristicas integradas a CDCL, en este caso, dos de las que intentan dar soluci/'on al problema de selecci/'on de variables: Dichas estrategias, VSIDS y DLIS, son comparadas usando \textit{restart} y no.

En el trabajo se usaron los lenguajes de programaci/'on C++, Python y bash. CaDiCaL est/'a programado en C++, por lo que es el lenguaje en el que est/'an implementadas las heur/'isticas. Python fue usado para automatizar los procesos de pruebas, guardar los resultados obtenidos y realizar los an/'lisis estad/'sticos. Finalemnte, bash se usa como parte de la "compilaci/'on" del solver, cuyos archivos como \textit{configure} y \textit{makefile} que vienen integrados al \textit{solver}, son los encargados de hacerlo funcionar.

\subsection{CaDiCaL}
CaDiCaL fue el \textit{solver} escogido para esta comparaci/'on, ya que cuenta con la posibilidad de activar y desactivar VSIDS (ya viene integrada), al igual que la estrategia \textit{restart}, tambi/'en integrada en el solucionador.\footnote{Cabe destacar que CaDiCaL ofrece esta misma posibilidad para much/'isimas heur/'sticas, adem/'as de estrategias para adaptar la v/'a de soluci/'on al tipo de problemas (citar documentaci/'n de CaDiCaL)} Como ya se mencion/'o con anterioridad en este documento, pr/'acticamente todos los CDCL SAT \textit{solvers} modernos no incluyen DLIS como heur/'istica de selecci/'on de variables, y CaDiCaL es uno de ellos. Por esta raz/'on, se decidi/'o integrar una implementaci/'on de DLIS a este solucionador, aprovechando la pol/'itica \textit{open source} de su c/'odigo fuente.%insertar link al repo original de cadical.

\subsubsection{Integraci/'on de DLIS}
Para integrar DLIS en CaDiCaL se modificaron los siguientes archivos:
\begin{itemize}
    \item \textit{internal.hpp}
    \item \textit{internal.cpp}
    \item \textit{decide.cpp}
    \item \textit{options.hpp}
\end{itemize}

{\textit{internal.hpp}}
En este archivo se declaran los m/'todos que ser/'an implementados como parte de la clase \textit{Internal}:

\begin{lstlisting}
  // DLIS
  int next_decision_variable_with_dlis ();
  int count_literal_in_unsatisfied_binary_clauses(int lit);
\end{lstlisting}

{\textit{internal.cpp}}
En \textit{internal.cpp} se a/~nadi/'o el siguiente c/'odigo que contiene la l/'ogica de funcionamiento de DLIS.
CaDiCaL almacena las variables de la FNC en una lista doblemente enlazada, en la que aquellas que ya han sido asignadas y las que a/'un no tienen un valor definido se encuentran separadas en dos grupos (dentro de la misma lista) separadas por un /'indice que marca el l/'mite entre ellas. Este valor va cambiando con cada asignaci/'on. Haciendo uso de esta estructura, el siguiente m/'etodo se encarga de comparar la ocurrencia, en cl/'ausulas insatisfechas, de los literales correspondientes a las variables sin asignar, y elige el de valor m/'aximo.

\begin{lstlisting}[escapechar=!., language=C++]
int Internal::next_decision_variable_with_dlis () {
  int best_lit = 0;
  int best_score = -1;

  // Empezamos en el primer nodo ``no asignado'' de la cola:
  int idx = queue.unassigned;

  // Recorremos la lista de variables sin asignar (link(idx).prev nos lleva
  // al siguiente ``sin asignar''), igual que en next_decision_variable_on_queue().
  while (idx) {
    // Si idx ya tiene val(idx) != 0, saltemos (aunque en teor\'ia queue.unassigned
    // siempre apunta a un idx tal que val(idx)==0; no obstante, por seguridad lo comprobamos).
    if (val(idx) == 0) {
      // Calcular la puntuaci\'on DLIS para +idx y para -idx
      int pos_score = count_literal_in_unsatisfied_clauses_(idx);
      int neg_score = count_literal_in_unsatisfied_clauses_(-idx);

      float med_score = (pos_score + neg_score)/2; // Se toma el promedio por la estrategia de phase

      // Comparar con el mejor hasta ahora
      if (med_score > best_score) {
        best_score = med_score;
        best_lit   = idx;    
      }      
    }
    // Avanzamos al siguiente \'indice ``no asignado'':
    idx = link(idx).prev;
  }

  LOG ("next DLIS decision literal %d with score %d", best_lit, best_score);
  return abs(best_lit);
}
\end{lstlisting}

Es importante aclarar que el c\'alculo del \textit{score} de cada literal no se hace tal cual dicta DLIS, pues en aras de mantener la consistencia del c\'odigo de CaDiCaL se usaron estrategias y estructuras que ya vienen implementadas, y a las cuales se acoplan las heur\'isticas de decisi\'on de variables que ya incorpora el solucionador. En este caso, obs\'ervese que se promedian los \textit{scores} de ambos literales. Esto, debido a que CaDiCaL implementa la estrategia \textit{phase} (citar info en marco te\'orico) para elegir la polaridad de la variable. Por esta raz\'on el m\'etodo devuelve la variable y no el literal.

Obs\'ervese que este m\'etodo hace un llamado a \begin{lstlisting}[escapechar=!., language=C++]
int count_literal_in_unsatisfied_clauses_(idx)
\end{lstlisting} 
que es el encargado de calcular el \textit{score} para un literal.

\begin{lstlisting}[escapechar=!., language=C++]
int Internal::count_literal_in_unsatisfied_clauses_ (int lit) {
  int count = 0;
  // Cacheamos una sola vez el valor de 'lit'.
  const signed char val_lit = val (lit);
  // Recorremos su lista de watchers
  const Watches &ws = watches (lit);
  for (const Watch &w : ws) {
    Clause *c = w.clause;                
    if (!c || c->garbage) continue;      // Saltar nulos y garbage
    int other = w.blit;                  // El otro literal de la cl\'ausula
    // Si 'lit' o 'other' ya son verdaderos, la cl\'ausula est\'a satisfecha
    if (val_lit != 0 || val (other) != 0) continue;
    ++count;
  }
  return count;
}

int Internal::compute_dlis_score(int lit) {
  return count_literal_in_unsatisfied_clauses_(lit);
}
\end{lstlisting}

En el c\'odigo anterior puede verse que para efectuar el conteo de ocurrencias de un literal no se revisan todas las cl\'ausulas insatisfechas; en su lugar se aprovecha la estructura que usa CaDiCaL para aplicar la estrategia \textit{Two Watched Literals} (TWL) (hacer referencia al marco te\'orico). Luego, se recorren solo las cl\'ausulas insatisfechas donde el literal est\'e vigilado, y se procede con el c\'alculo de su \textit{score}. Con esta implementaci\'on se busca disminuir para algunos problemas el costo de recorrer todas las clausulas.

\subsubsection{\textit{decide.cpp}}
El flujo de decisi\'on sobre la pr\'oxima variable a asignar se lleva a cabo en el archivo \textit{decide.cpp}, espec\'ificamente en el siguiente m\'etodo:

\begin{lstlisting}[escapechar=!., language=C++]
int Internal::decide () {
  assert (!satisfied ());
  START (decide);
  int res = 0;

  //... implementacion de assumptions

    else {

    int decision = 0;
    int idx = 0;
    
    if (opts.dlis /*&& stats.decisions < threshold*/) {
      //decision = pick_dlis_branch_literal();
      idx = next_decision_variable_with_dlis ();
      LOG ("DLIS decision literal %d", decision);
    } else {
      idx = next_decision_variable ();
    }
    const bool target = (opts.target > 1 || (stable && opts.target));
    if (idx) decision = decide_phase (idx, target);
    

    if (decision) {
      stats.decisions++;
      LOG ("deciding literal %d", decision);
      search_assume_decision (decision);
    }
  }

  if (res) marked_failed = false;
  STOP (decide);
  return res;
}
\end{lstlisting}

Como se puede observar, se respeta el orden de decisi\'on que sigue CaDiCaL, garantizando primero el an\'alisis de los valores de las variables seg\'un \textit{assumption} ((assumptions--> hacer referencia a donde se explican en el marco te\'orico). Luego, antes de aplicar DLIS se verifica si su flag correspondiente est\'a activada (DLIS no se usa por defecto), y en caso positivo se procede con la elecci\'on de la variable seg\'un lo explicado anteriormente. Obs\'ervese tambi\'en que heur\'isticas las heur\'sticas de decisi\'on de variables implementadas en el \textit{solver} se analizan luego de \textit{assumptions}.

Una vez escogida la variable, se llama al m\'etodo \textit{decide\_phase} para elegir su polaridad en base a la estrategia \textit{phasing} (citar phasing en el marco te\'orico).

\subsubsection{options.hpp}
Finalmente, para habilitar la \textit{flag} \textit{--dlis=<bool>} para activar y desactivar la heur\'istica incorporada, se a\~nadi\'o la siguiente l\'inea al archivo \textit{options.hpp}

\begin{lstlisting}[escapechar=!._, language=C++]
#define OPTIONS \
\
/*      NAME         DEFAULT, LO, HI,O,P,R, USAGE */ \
\
//... varias options...
OPTION( dlis,              0,  0,  1,0,0,1, "use DLIS decision heuristic") \
//...varias options...
\end{lstlisting}

\subsection{Empleo de \textit{flags} en la l/'inea de comandos}
Los \textit{flags} usados en la l/'inea de comandos para combinar las heur/'isticas fueron:
\begin{itemize}
    \item VSIDS + restart = --score=false
    \item VSIDS + no restart = --score=false --restart=false
    \item DLIS + restart = --dlis=true --score=false
    \item DLIS + no restart = --dlis=true --score=false --restart=false
\end{itemize}

La \textit{flag} \textit{--score=false} desactiva el empleo de la estrategia EVSIDS (citar en el marco te\'orico) para usar solo el \textit{bump} caracter\'istico de VSIDS. El resto de las que est\'an son bastante descriptivas. 
Fueron usadas, adem\'as, dos \textit{flags} generales para cada heur\'istica: \textit{-t 120} que pone un \textit{timeout} de m\'aximo 120 segundos, y \textit{--stats} que muestra estad\'isticas extra para los problemas resueltos (resultado = \textit{SATISFIABLE}/\textit{UNSATISFIABLE}).

\subsection{Problemas}
Cada combinaci\'on de heur\'istica fue probada en cada uno de los 135 problemas generados que abarcan las siguientes categor\'ias:

\begin{itemize}
    \item Random 3-SAT 
    \begin{itemize}
        \item Se generaron 15 instancias.
        \item TamaÃ±os de variables: 1000, 2000, 5000 (rotando cÃ­clicamente).
        \item RelaciÃ³n clÃ¡usulas/variables: 3.76, 4.26 y 4.76 (alrededor del umbral de fase para 3-SAT).
        \item Ejemplo de archivo: random3sat\_n1000\_r4.26\_0.cnf.
    \end{itemize}
    \item \textit{Pigeonhole Principle} (principio del palomar)
    \begin{itemize}
        \item Se generaron 15 instancias.
        \item NÃºmero de hoyos: 10, 20, 30, 40, 50 (rotando cÃ­clicamente).
        \item NÃºmero de palomas: siempre n\_hoyos + 1.
        \item Ejemplo de archivo: pigeon\_11\_into\_10\_0.cnf.
    \end{itemize}
    \item Random 4-SAT
    \begin{itemize}
        \item Se generaron 15 instancias.
        \item TamaÃ±os de variables: 500, 1000, 2000 (rotando cÃ­clicamente).
        \item RelaciÃ³n clÃ¡usulas/variables: 8.88, 9.88, 10.88 (alrededor del umbral de fase para 4-SAT).
        \item Ejemplo de archivo: random4sat\_n500\_r9.88\_0.cnf.
    \end{itemize}
    \item \textit{Graph Coloring} en Grafos Aleatorios
    \begin{itemize}
        \item Se generaron 10 instancias.
        \item NÃºmero de nodos: 50, 100, 200 (rotando cÃ­clicamente).
        \item Probabilidad de arista: 0.1, 0.3, 0.5 (rotando cÃ­clicamente).
        \item NÃºmero de colores: 3, 4, 5 (rotando cÃ­clicamente).
        \item Ejemplo de archivo: graphcol\_n50\_p0.10\_k3\_0.cnf.
    \end{itemize}
    \item \textit{Parity} (XOR) \textit{Constraints}
    \begin{itemize}
        \item Se generaron 10 instancias.
        \item NÃºmero de variables: 10, 20, 30, 40, 50 (rotando cÃ­clicamente).
        \item Ejemplo de archivo: parity\_n10\_0.cnf.
    \end{itemize}
    \item BMC de Flip-Flop Simple
    \begin{itemize}
        \item Se generaron 10 instancias.
        \item Profundidad del circuito: 3, 5, 7, 9, 11 (rotando cÃ­clicamente).
        \item Ejemplo de archivo: bmc\_flipflop\_d3\_0.cnf.
    \end{itemize}
    \item Problemas \textit{DLIS-friendly}
    \begin{itemize}
        \item Se generaron 30 instancias.
        \item NÃºmero de variables: 200, 300, 400 (seleccionado aleatoriamente).
        \item TamaÃ±o de clÃ¡usula: 5 o 6 (aleatorio).
        \item RelaciÃ³n clÃ¡usulas/variables: valor real entre 2.0 y 3.5 (aleatorio).
        \item Sesgo positivo en literales: entre 0.7 y 0.8 (aleatorio).
        \item Ejemplo de archivo: biased\_random5sat\_n200\_r2.45\_b0.73\_2000.cnf.
    \end{itemize}
    \item Problemas \textit{no DLIS-friendly}
    \begin{itemize}
        \item Se generaron 30 instancias.
        \item NÃºmero de variables: 1000, 2000, 5000 (aleatorio).
        \item TamaÃ±o de clÃ¡usula: 3.
        \item RelaciÃ³n clÃ¡usulas/variables: valor real entre 4.0 y 5.0 (aleatorio).
        \item Sin sesgo en literales: bias\_pos = 0.5.
        \item Ejemplo de archivo: biased\_random3sat\_n1000\_r4.32\_b0.50\_3000.cnf.
    \end{itemize}
\end{itemize}


El generador cubre exhaustivamente ocho familias de problemas: Random 3-SAT, \textit{Pigeonhole}, Random 4-SAT, \textit{Graph Coloring}, \textit{Parity}, BMC Flip-Flop, \textit{DLIS-friendly} y \textit{no DLIS-friendly}. Cada familia tiene parÃ¡metros clave que varÃ­an (nÃºmero de variables, relaciÃ³n clÃ¡usulas/variables, sesgo, tamaÃ±o de clÃ¡usula, profundidad, etc.), asegurando diversidad estructural y de dificultad en los \textit{benchmarks} generados.

\subsection{Generador de problemas}
El generador de problemas (\textit{benchmarks}) se program\'o en python y se usaron las bibliotecas \textit{os}, \textit{random} y \textit{csv}. Los resultados se exportaron a una carpeta \textit{``generated\_benchmarks''} en el mismo directorio del \textit{script} cuyos archivos se encuentran en formato DIMACS (referencia al marco te\'orico) en .cnf.

\subsection{Estad/'isticas}
El an\'alisis estad\'istico de los resultados de la comparaci\'on de cada heur\'istica por problema est\'a implementado en el archivo \textit{stats\_analysis.ipynb}. Se compar\'o los problemas cuyo resultado fue \textit{TIMEOUT} con los que s\'i resolvieron las heur\'isticas. Se hace un an\'alisis de la distribuci\'on de cada caracter\'istica en problemas \textit{TIMEOUT} por heur\'istica. Para el caso de los problemas resueltos (resultado = \textit{SATISFIABLE/UNSATISFIABLE}) se hace de igual modo un an\'alisis de la distribuci\'on y se incluye la caracter\'istica \textit{tiempo en segundos}. Posteriormente se hace un an\'alisis comparativo entre los problemasa que fueron resueltos y los que no. Para ello se realiza un an\'alisis entre variables y se eliminan aquellas que sean colineales. Esta comprobaci\'n se realiza mediante el c\'alculo del Factor de Inflaci\'on de Varianza (VIF).
Para realizar la comparaci\'on en cuanto a caracter\'isticas entre los problemas resueltos y los que no, se realizan las pruebas de Mann-Whitney U, y para visualizar los resultados se emplean gr\'aficas de caja y bigotes. Adem\'as, tambi\'en se usa regresi\'on log\'istica ya que permite interpretar c\'omo cada variable afecta la probabilidad de que ocurra o no un \textit{TIMEOUT}.

La otra parte de la evaluaci\'on consiste en un an\'alisis del rendimiento de cada combinaci\'on de heur\'isticas en cuanto al tiempo de ejecuci\'on en los problemas resueltos. Para ello se hizo un an\'alisis de la correlaci\'on de Spearman entre las caracter\'isticas de los problemas y el tiempo en segundos. Se realiz\'o, adem\'as, el test de Kruskal-Wallis para analizar si el tiempo difiere entre heur\'isticas para un mismo tipo de problema. Asimismo, se realiz\'o el test de Dunn por cada heur\'istica para realizar una comparaci\'on estad\'istica post-hoc (prueba de Dunn) para analizar si existen diferencias significativas en los tiempos de resoluci\'on (\textit{log}(\text{tiempo})) de una heur\'istica espec\'ifica en los problemas resueltos, seg\'un los valores de una caracter\'istica. 
Los resultados son graficados en \textit{boxplot}. Finalmente, se realiza una regresi\'on lineal m\'ultiple para definir qu\'e caracter\'isticas predicen el tiempo de resoluci\'on.

Para la implementaci\'on de estos an\'alisis se usaron las siguientes bibliotecas de python: \textit{pandas}, \textit{numpy}, \textit{seaborn}, \textit{matplotlib.pyplot}, \textit{statsmodels.api}, \textit{variance\_inflation\_factor} y variance\_inflation\_factor, ambas de \textit{statsmodels.stats.outliers\_influence}, \textit{ols} de \textit{statsmodels.formula.api}, \textit{scipy.stats}, \textit{LogisticRegression} de \textit{sklearn.linear\_model}, y scikit\_posthocs.

\section{Resultados}
\subsection{An\'alisis de los problemas con TIMEOUT}

\subsubsection{Tabla resumen de TIMEOUTs}
%Insertar referencia a tabla
En la tabla (insertar referencia) se muestran las caracteristicas de los problemas cuyo resultado fue timeout ademas del nombre de dicho problema y la heuristica. (visualizar estos datos mediante graficas)

Con base en el conjunto de resultados filtrados por TIMEOUT, se observa que las heurÃ­sticas evaluadas presentan diferencias claras en su comportamiento frente a instancias con distintas caracterÃ­sticas estructurales. Por ejemplo, la heurÃ­stica VSIDS combinada con reinicio tiende a experimentar TIMEOUT en instancias con menor nÃºmero de variables pero con una densidad relativamente alta de clÃ¡usulas por variable, lo que sugiere que esta configuraciÃ³n puede ser menos efectiva en problemas mÃ¡s densos aunque de tamaÃ±o moderado. 

En contraste, DLIS sin reinicio acumula TIMEOUT en instancias con un mayor nÃºmero de variables pero con densidad menor, indicando que esta heurÃ­stica puede tener dificultades para escalar en problemas mÃ¡s grandes, aunque menos densos. AdemÃ¡s, la presencia o ausencia de reinicios parece influir significativamente en el rendimiento, dado que las combinaciones con reinicio generalmente muestran un patrÃ³n distinto de TIMEOUT frente a las que no lo incorporan. 

Estas observaciones permiten suponer que la elecciÃ³n de heurÃ­stica y estrategia de reinicio debe adaptarse a la estructura especÃ­fica del problema SAT para optimizar el rendimiento y evitar fallos por lÃ­mite de tiempo.

\subsubsection{Estad\'isticas descriptivas}
(insertar graficas boxplot)

El anÃ¡lisis estadÃ­stico descriptivo y las visualizaciones mediante diagramas de caja permiten observar con mayor detalle cÃ³mo se distribuyen las caracterÃ­sticas de las instancias que resultaron en TIMEOUT segÃºn la heurÃ­stica aplicada. En tÃ©rminos generales, las cuatro heurÃ­sticas (DLIS+no-restart, DLIS+restart, VSIDS+no-restart y VSIDS+restart) presentan distribuciones muy similares en cuanto a las mÃ©tricas de nÃºmero de variables, nÃºmero de clÃ¡usulas, densidad, tamaÃ±o promedio de clÃ¡usula y cantidad de variables positivas y negativas.

Asimismo, la densidad media se mantiene cercana a 7.4â7.7 para todas las heurÃ­sticas, con una dispersiÃ³n considerable que alcanza hasta 25, lo que refleja que tanto problemas poco densos como muy densos pueden provocar fallos por tiempo.

El tamaÃ±o promedio de clÃ¡usula se mantiene estable alrededor de 3, con poca variabilidad, sugiriendo que esta caracterÃ­stica no discrimina el comportamiento de las heurÃ­sticas en cuanto a TIMEOUT.

Las variables positivas y negativas tambiÃ©n muestran simetrÃ­a y valores medios similares entre heurÃ­sticas, lo que implica que la polaridad de las variables no es un factor determinante en la ocurrencia de TIMEOUT. 

En conjunto, estos resultados sugieren que las diferencias en el rendimiento entre heurÃ­sticas no se explican fÃ¡cilmente por las caracterÃ­sticas bÃ¡sicas de las instancias con TIMEOUT.

Las visualizaciones de caja refuerzan esta interpretaciÃ³n al mostrar solapamientos amplios en las distribuciones de cada caracterÃ­stica por heurÃ­stica.

\subsubsection{Conteo de TIMEOUT por heur\'istica y por problema}

(insertar gr\'aficas)
En las graficas se puede observar que los problemas que tomaron mas tiempo en resolverse coinciden con los los planteados en la literatura que resultan mas dificiles de resolver a instancias SAT. Respecto a la cantidad de problemas con TIMEOUTS por heuristica, se puede apreciar que DLIS, independientemente del restart, se comporta mas lento que vsids para algunos problemas. Por su parte, vsids con restart se comporta mas lento que vsids sin restart para unas pocas instancias.

\subsection{An\'alisis de problemas resueltos (SATISFIABLE/UNSATISFIABLE)}

\subsubsection{Tabla resumen de RESUELTOS}
(insertar grafico que describa los resultados de la tabla filtrada por problemas resueltos)

El anÃ¡lisis de los problemas resueltos muestra que las instancias que concluyeron satisfactoriamente (ya sea SATISFIABLE o UNSATISFIABLE) abarcan un amplio rango de tamaÃ±os y caracterÃ­sticas, desde problemas muy pequeÃ±os con 6 variables y 12 clÃ¡usulas hasta otros considerablemente mÃ¡s grandes con hasta 5000 variables y mÃ¡s de 23000 clÃ¡usulas.

Los tiempos de resoluciÃ³n registrados varÃ­an notablemente, desde fracciones de segundo en problemas pequeÃ±os (por ejemplo, alrededor de 0.0014 segundos en instancias con 6 variables) hasta varios segundos en problemas mÃ¡s complejos (por ejemplo, cerca de 9 segundos en instancias con 500 variables y alta densidad). Esto indica que, aunque el solver puede resolver eficientemente instancias pequeÃ±as o medianas, el tiempo de cÃ³mputo crece conforme aumentan la cantidad de variables y clÃ¡usulas, asÃ­ como la densidad del problema.

La presencia de las cuatro heurÃ­sticas en los resultados resueltos sugiere que todas son capaces de resolver ciertos conjuntos de problemas. Sin embargo, la diversidad en tiempos y tamaÃ±os sugiere que la heurÃ­stica y la estrategia de reinicio podrÃ­an influir en la eficiencia, especialmente en problemas de mayor escala.

\subsubsection{Estad\'isticas descriptivas}
(insertar gr\'afica boxplot)

El anÃ¡lisis estadÃ­stico descriptivo del tiempo de resoluciÃ³n y las caracterÃ­sticas de las instancias resueltas por cada heurÃ­stica revela patrones importantes sobre el comportamiento del \textit{solver}.

En primer lugar, se observa que las instancias resueltas por las cuatro heurÃ­sticas (DLIS+no-restart, DLIS+restart, VSIDS+no-restart y VSIDS+restart) cubren un rango amplio en tamaÃ±o, con nÃºmero de variables promedio entre 322 y 403, y mÃ¡ximos que alcanzan hasta 2000 o incluso 5000 variables en el caso de VSIDS+restart. La cantidad de clÃ¡usulas tambiÃ©n presenta gran dispersiÃ³n, con medias cercanas a 3100â3400 y mÃ¡ximos que superan las 50,000, lo que indica que el solver puede manejar problemas desde muy pequeÃ±os hasta instancias complejas. La densidad promedio se mantiene alrededor de 7,2 a 7,4, con valores mÃ¡ximos muy altos (hasta 51.9), reflejando diversidad en la estructura de los problemas.

En cuanto al tiempo de resoluciÃ³n, se evidencia una marcada diferencia entre heurÃ­sticas: DLIS+no-restart presenta el tiempo medio mÃ¡s bajo (~0.37 s), seguido por DLIS+restart (~3.13 s), mientras que VSIDS+no-restart y VSIDS+restart muestran tiempos medios mÃ¡s elevados, cerca de 4.98 y 4.98 segundos respectivamente, con alta variabilidad (desviaciones estÃ¡ndar muy grandes y mÃ¡ximos que superan los 80 segundos). Esta dispersiÃ³n sugiere que aunque VSIDS puede ser eficiente en muchos casos, tambiÃ©n enfrenta problemas que requieren tiempos significativamente mayores. AdemÃ¡s, la mediana del tiempo para todas las heurÃ­sticas es muy baja (en el orden de milisegundos), indicando que la mayorÃ­a de las instancias se resuelven rÃ¡pidamente, pero existen casos atÃ­picos que prolongan el tiempo promedio.

El tamaÃ±o promedio de clÃ¡usula es similar entre heurÃ­sticas, alrededor de 3.4, y las variables positivas y negativas mantienen valores simÃ©tricos, lo que indica que estas caracterÃ­sticas no explican las diferencias en tiempo.

En conjunto, estos resultados sugieren que la elecciÃ³n de heurÃ­stica impacta significativamente el tiempo de resoluciÃ³n en ciertos problemas, especialmente en instancias grandes o complejas, y que VSIDS puede tener mayor variabilidad en rendimiento.

\subsection{Porblemas RESUELTOS vs TIMEOUT}

\subsubsection{An\'alisis de multicolinealidad}

(insertar matriz de correlaci\'on)

Como se puede apreciar, entre las variables num\_vars y vars\_positivas y vars\_negativas, existe correlaci\'on perfecta ($r=1$). Adem\'as, existe una correlaci\'on moderada entre las variables num\_clausulas con vars\_negativas, vars\_positivas, num\_vars y densidad). Luego, es necesario reducir el conjunto de caracter\'isticas, quedando  el siguiente: \texttt{caracteristicas\_reducidas = ['num\_vars', 'densidad', 'tamanio\_prom\_clausula']}.

(insertar matriz de correlacion del nuevo conjunto)
Como se muestra en la matriz, se elimin\'o las correlaciones moderadas y severas.

\subsubsection{Comparaci\'on de caracter\'isticas entre RESUELTOS Y TIMEOUTs}

Al realizar el test de normalidad de Shapiro-Wilk se obtuvo los siguientes resultados:

\texttt{num\_vars (TIMEOUT): ShapiroResult(statistic=np.float64(0.7933191376191727), pvalue=np.float64(1.1794648547679767e-18))
num\_vars (NO TIMEOUT): ShapiroResult(statistic=np.float64(0.6698142994834743), pvalue=np.float64(9.428437191286474e-26))
densidad (TIMEOUT): ShapiroResult(statistic=np.float64(0.6461253813664019), pvalue=np.float64(7.820027948180053e-24))
densidad (NO TIMEOUT): ShapiroResult(statistic=np.float64(0.5441281055563653), pvalue=np.float64(2.297890446301959e-29))
tamanio\_prom\_clausula (TIMEOUT): ShapiroResult(statistic=np.float64(0.752042266567243), pvalue=np.float64(2.4804046463422804e-20))
tamanio\_prom\_clausula (NO TIMEOUT): ShapiroResult(statistic=np.float64(0.8112114166434761), pvalue=np.float64(4.389991714803694e-20))}

Este an\'alisis revela que ninguna de estas caracterÃ­sticas sigue una distribuciÃ³n normal en los grupos de instancias que terminaron en TIMEOUT ni en las que fueron resueltas. Esto se evidencia en los valores de p muy bajos (todos menores a 0.05, incluso extremadamente cercanos a cero), lo que permite rechazar la hipÃ³tesis nula de normalidad para cada variable en ambos grupos. En concreto, los estadÃ­sticos de Shapiro oscilan entre aproximadamente 0.54 y 0.81, y los p-valores indican una desviaciÃ³n significativa de la normalidad.

Luego, para comparar estas caracterÃ­sticas entre instancias con y sin TIMEOUT no es apropiado utilizar pruebas paramÃ©tricas basadas en la normalidad, como el t-test, sino que se deben emplear mÃ©todos no paramÃ©tricos, por ejemplo la prueba de Mann-Whitney, cuyo resultado se presenta a continuaci\'on. 

\subsubsection{Prueba Mann-Whitney U}

\texttt{Mann-Whitney U para num\_vars: p-value = 1.383e-83
Mann-Whitney U para densidad: p-value = 3.168e-29
Mann-Whitney U para tamanio\_prom\_clausula: p-value = 0.803}

La prueba muestra resultados concluyentes sobre las diferencias entre las instancias que terminaron en TIMEOUT y las que fueron resueltas.

Para las variables nÃºmero de variables y densidad, los valores p son extremadamente bajos (1.383e-83 y 3.168e-29 respectivamente), lo que indica diferencias estadÃ­sticamente significativas entre ambos grupos en estas caracterÃ­sticas. Esto sugiere que tanto el tamaÃ±o del problema como su densidad influyen fuertemente en la probabilidad de que un problema termine en TIMEOUT.

En contraste, para el tamaÃ±o promedio de clÃ¡usula el p-valor es alto (0.803), lo que implica que no hay evidencia suficiente para afirmar que esta caracterÃ­stica difiera entre problemas con y sin TIMEOUT.

Estos resultados confirman que las variables relacionadas con la escala y complejidad estructural del problema (num\_vars y densidad) son factores determinantes en el rendimiento del solver, mientras que el tamaÃ±o promedio de las clÃ¡usulas no parece ser un factor discriminante en la ocurrencia de TIMEOUT.

En consecuencia, para modelar o predecir la probabilidad de TIMEOUT conviene priorizar las variables num\_vars y densidad, y descartar o tratar con menor peso el tamaÃ±o promedio de clÃ¡usula. 

\subsubsection{Regresi\'on log\'istica: Â¿QuÃ© caracterÃ­sticas predicen TIMEOUT?}

Trasa efectuar la regresi\'on se obtuvieron los siguientes resultados:

\texttt{num\_vars: coeficiente logit = 0.0032
densidad: coeficiente logit = -0.0314
tamanio\_prom\_clausula: coeficiente logit = -0.5455}

Con base en estos resultados, el modelo ofrece una interpretaciÃ³n clara sobre la influencia de cada caracterÃ­stica en la probabilidad de que un problema no se resuelva en el tiempo lÃ­mite.

El coeficiente positivo para num\_vars (0.0032) indica que a medida que aumenta el nÃºmero de variables, la probabilidad de TIMEOUT tambiÃ©n incrementa, lo cual es consistente con la intuiciÃ³n y los anÃ¡lisis descriptivos previos que mostraron que problemas mÃ¡s grandes tienden a ser mÃ¡s difÃ­ciles de resolver. 

Por otro lado, los coeficientes negativos para densidad (-0.0314) y especialmente para tamaÃ±o promedio de clÃ¡usula (-0.5455) sugieren que, manteniendo constante el nÃºmero de variables, un aumento en estas caracterÃ­sticas estÃ¡ asociado con una menor probabilidad de TIMEOUT. En particular, el tamaÃ±o promedio de clÃ¡usula tiene un efecto considerablemente mÃ¡s fuerte en sentido negativo, lo que podrÃ­a indicar que clÃ¡usulas mÃ¡s largas o complejas, dentro del rango observado, facilitan la resoluciÃ³n o estÃ¡n asociadas a problemas menos propensos a agotar el tiempo.

Estos signos y magnitudes reflejan que la complejidad estructural del problema no se reduce solo al tamaÃ±o, sino que la forma en que las clÃ¡usulas estÃ¡n construidas tambiÃ©n impacta el rendimiento del solver. En conjunto, el modelo confirma y cuantifica las tendencias observadas en anÃ¡lisis estadÃ­sticos previos, y ofrece una base para predecir y ajustar heurÃ­sticas en funciÃ³n de las caracterÃ­sticas del problema para minimizar la ocurrencia de TIMEOUT.

\subsection{Rendimiento de las heur\'isticas en problemas resueltos}
Para los an\'alisis estad\'isticos en esta secci\'on se incluy\'o la variable tiempo, que e=indica en seg cu\'anto tard\'o el \textit{solver} en dar una soluci\'on.

\subsubsection{Correlaci\'on de Spearman}
Se obtuvo los siguientes resultados:

\texttt{Spearman num\_vars vs tiempo\_segundos: rho = 0.845, p = 1.116e-63
Spearman densidad vs tiempo\_segundos: rho = 0.318, p = 8.968e-07
Spearman tamanio\_prom\_clausula vs tiempo\_segundos: rho = 0.710, p = 1.929e-36}

Este an\'alisis revela asociaciones significativas y de distinta intensidad.

La variable nÃºmero de variables muestra una correlaciÃ³n muy fuerte y positiva con el tiempo de resoluciÃ³n (rho = 0.845, p < 0.001), indicando que a mayor tamaÃ±o del problema, mayor es el tiempo requerido para resolverlo, lo cual es coherente con la complejidad esperada en problemas SAT.

La densidad presenta una correlaciÃ³n positiva moderada (rho = 0.318, p < 0.001), lo que sugiere que problemas con mayor densidad de clÃ¡usulas por variable tienden a requerir mÃ¡s tiempo, aunque este efecto es menos pronunciado que el del tamaÃ±o.

Por Ãºltimo, el tamaÃ±o promedio de clÃ¡usula tambiÃ©n exhibe una correlaciÃ³n fuerte positiva (rho = 0.710, p < 0.001), indicando que clÃ¡usulas mÃ¡s largas o complejas estÃ¡n asociadas con un aumento significativo en el tiempo de resoluciÃ³n.

Estos resultados confirman que tanto la escala del problema como su estructura influyen en el rendimiento del solver, siendo el nÃºmero de variables el factor mÃ¡s determinante, seguido por la complejidad de las clÃ¡usulas y la densidad. 

\subsubsection{Kruskal-Wallis: Â¿El tiempo difiere entre heurÃ­sticas para un mismo tipo de problema?}

Dados los siguientes resultados:

\texttt{
Kruskal-Wallis para heurÃ­stica: VSIDS+restart
Variable: num\_vars, estadÃ­stico = 55.0704, p-valor = 1.738e-06
Variable: densidad, estadÃ­stico = 55.8711, p-valor = 8.922e-05
Variable: tamanio\_prom\_clausula, estadÃ­stico = 54.8239, p-valor = 0.0001258}

\texttt{
Kruskal-Wallis para heurÃ­stica: VSIDS+no-restart
Variable: num\_vars, estadÃ­stico = 54.7791, p-valor = 9.448e-07
Variable: densidad, estadÃ­stico = 55.2582, p-valor = 6.482e-05
Variable: tamanio\_prom\_clausula, estadÃ­stico = 55.6763, p-valor = 9.513e-05}

\texttt{
Kruskal-Wallis para heurÃ­stica: DLIS+restart
Variable: num\_vars, estadÃ­stico = 41.2553, p-valor = 4.441e-05
Variable: densidad, estadÃ­stico = 40.6674, p-valor = 0.001692
Variable: tamanio\_prom\_clausula, estadÃ­stico = 42.9055, p-valor = 0.003232}

\texttt{
Kruskal-Wallis para heurÃ­stica: DLIS+no-restart
Variable: num\_vars, estadÃ­stico = 46.9197, p-valor = 4.813e-06
Variable: densidad, estadÃ­stico = 47.8132, p-valor = 9.17e-05
Variable: tamanio\_prom\_clausula, estadÃ­stico = 48.7640, p-valor = 0.000332}

Se tiene que El anÃ¡lisis mediante la prueba no paramÃ©trica de Kruskal-Wallis aplicado a la variable transformada del tiempo de resoluciÃ³n (logaritmo natural del tiempo mÃ¡s uno) para cada heurÃ­stica y caracterÃ­stica del problema revela diferencias estadÃ­sticamente significativas en todos los casos evaluados.

Para las cuatro heurÃ­sticas (VSIDS+restart, VSIDS+no-restart, DLIS+restart y DLIS+no-restart), las variables nÃºmero de variables, densidad y tamaÃ±o promedio de clÃ¡usula muestran valores de estadÃ­stico elevados y p-valores muy bajos (todos menores a 0.005), lo que indica que la distribuciÃ³n del tiempo de resoluciÃ³n difiere significativamente entre los distintos grupos definidos por cada una de estas caracterÃ­sticas. Esto implica que, independientemente de la heurÃ­stica utilizada, las propiedades estructurales del problema impactan de forma relevante en el rendimiento temporal del \textit{solver}.

La consistencia de estos resultados a travÃ©s de todas las heurÃ­sticas sugiere que la influencia de estas variables es robusta y generalizable, reafirmando su importancia en el anÃ¡lisis y modelado del comportamiento del solver SAT. AdemÃ¡s, el uso del logaritmo del tiempo como variable respuesta ayuda a mitigar la influencia de valores extremos y facilita la detecciÃ³n de diferencias significativas en la mediana y distribuciÃ³n del tiempo. 

\subsubsection{Pruebas post hoc con test de Dunn}

Para estas pruebas se obtuvieron los siguientes resultados:

\texttt{Test de Dunn para heurÃ­stica: VSIDS+restart}

\texttt{
Variable: num\_vars (grupos por cuartiles con ranking)
              1         2         3             4
1  1.000000e+00  0.703180  0.000015  1.056421e-07
2  7.031804e-01  1.000000  0.011745  4.209616e-04
3  1.466021e-05  0.011745  1.000000  1.000000e+00
4  1.056421e-07  0.000421  1.000000  1.000000e+00}

\texttt{
Variable: densidad (grupos por cuartiles con ranking)
          1         2         3         4
1  1.000000  0.000007  0.000503  0.070783
2  0.000007  1.000000  1.000000  0.103465
3  0.000503  1.000000  1.000000  0.872152
4  0.070783  0.103465  0.872152  1.000000}

\texttt{
Variable: tamanio\_prom\_clausula (grupos por cuartiles con ranking)
              1         2         3             4
1  1.000000e+00  0.123377  0.040784  7.498526e-08
2  1.233771e-01  1.000000  1.000000  6.133981e-03
3  4.078389e-02  1.000000  1.000000  2.285046e-02
4  7.498526e-08  0.006134  0.022850  1.000000e+00}


\texttt{Test de Dunn para heurÃ­stica: VSIDS+no-restart}

\texttt{
Variable: num\_vars (grupos por cuartiles con ranking)
              1         2         3             4
1  1.000000e+00  0.937707  0.000237  2.446266e-07
2  9.377070e-01  1.000000  0.039659  2.823215e-04
3  2.368724e-04  0.039659  1.000000  1.000000e+00
4  2.446266e-07  0.000282  1.000000  1.000000e+00}

\texttt{
Variable: densidad (grupos por cuartiles con ranking)
          1         2         3         4
1  1.000000  0.000001  0.000050  0.108825
2  0.000001  1.000000  1.000000  0.027465
3  0.000050  1.000000  1.000000  0.197057
4  0.108825  0.027465  0.197057  1.000000}

\texttt{
Variable: tamanio\_prom\_clausula (grupos por cuartiles con ranking)
              1         2         3             4
1  1.000000e+00  0.189033  0.004745  3.629837e-08
2  1.890331e-01  1.000000  1.000000  1.485490e-03
3  4.745457e-03  1.000000  1.000000  1.082227e-01
4  3.629837e-08  0.001485  0.108223  1.000000e+00}

\texttt{
Test de Dunn para heurÃ­stica: DLIS+restart}

\texttt{
Variable: num\_vars (grupos por cuartiles con ranking)
              1         2         3             4
1  1.000000e+00  1.000000  0.004494  1.182619e-07
2  1.000000e+00  1.000000  0.058306  1.022282e-05
3  4.494466e-03  0.058306  1.000000  1.668414e-01
4  1.182619e-07  0.000010  0.166841  1.000000e+00}

\texttt{
Variable: densidad (grupos por cuartiles con ranking)
          1         2         3         4
1  1.000000  0.024023  0.039453  0.005794
2  0.024023  1.000000  1.000000  1.000000
3  0.039453  1.000000  1.000000  1.000000
4  0.005794  1.000000  1.000000  1.000000}

\texttt{
Variable: tamanio\_prom\_clausula (grupos por cuartiles con ranking)
          1        2         3         4
1  1.000000  0.00071  0.078823  0.000005
2  0.000710  1.00000  1.000000  1.000000
3  0.078823  1.00000  1.000000  0.098370
4  0.000005  1.00000  0.098370  1.000000}

\texttt{
Test de Dunn para heurÃ­stica: DLIS+no-restart}

\texttt{
Variable: num\_vars (grupos por cuartiles con ranking)
              1         2         3             4
1  1.000000e+00  0.563525  0.000105  1.981346e-08
2  5.635254e-01  1.000000  0.048111  1.336627e-04
3  1.047943e-04  0.048111  1.000000  7.859709e-01
4  1.981346e-08  0.000134  0.785971  1.000000e+00}

\texttt{
Variable: densidad (grupos por cuartiles con ranking)
              1             2         3         4
1  1.000000e+00  6.856812e-07  0.001024  0.010847
2  6.856812e-07  1.000000e+00  0.891933  0.174521
3  1.023563e-03  8.919335e-01  1.000000  1.000000
4  1.084705e-02  1.745214e-01  1.000000  1.000000}

\texttt{
Variable: tamanio\_prom\_clausula (grupos por cuartiles con ranking)
              1         2         3             4
1  1.000000e+00  0.016085  0.029254  5.334288e-09
2  1.608499e-02  1.000000  1.000000  1.063184e-02
3  2.925435e-02  1.000000  1.000000  8.289626e-03
4  5.334288e-09  0.010632  0.008290  1.000000e+00}

El test post-hoc de Dunn aplicado por cuartiles (grupos definidos con ranking para evitar empates) para cada heurÃ­stica y variable seleccionada permite identificar con precisiÃ³n entre quÃ© grupos existen diferencias significativas en el tiempo de resoluciÃ³n (logaritmo del tiempo).

En general, para la variable nÃºmero de variables, se observan diferencias altamente significativas entre los cuartiles extremos (por ejemplo, grupo 1 vs. 4) en todas las heurÃ­sticas, con p-valores muy bajos (p < 0.001), lo que confirma que problemas mÃ¡s grandes requieren tiempos significativamente mayores para resolverse. En los grupos intermedios, las diferencias son menos consistentes pero tambiÃ©n aparecen comparaciones significativas, evidenciando una relaciÃ³n gradual entre tamaÃ±o y tiempo. 

Para la densidad, los resultados muestran diferencias significativas principalmente entre los cuartiles mÃ¡s bajos y mÃ¡s altos, aunque en algunos casos los grupos intermedios no difieren tanto, indicando que la densidad afecta el tiempo pero con menor fuerza y de manera menos lineal que el tamaÃ±o.

En cuanto al tamaÃ±o promedio de clÃ¡usula, tambiÃ©n se detectan diferencias significativas entre los extremos, especialmente entre el primer y cuarto cuartil, y en varios casos entre grupos adyacentes, lo que sugiere que esta variable influye en el rendimiento, aunque su efecto puede ser mÃ¡s sutil o no monotÃ³nico.

La consistencia de estos patrones a lo largo de todas las heurÃ­sticas refuerza la importancia de estas caracterÃ­sticas para explicar la variabilidad en el tiempo de resoluciÃ³n.

